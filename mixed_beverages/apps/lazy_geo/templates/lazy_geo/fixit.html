{% extends "base.html" %}


{% block body_class %}fixit{% endblock %}


{% block content %}{{ block.super }}
  <form id="fixit-form" method="POST">
    {% csrf_token %}
    <input type="submit" value="suggest new location"/>
    <input type="hidden" id="fixit-form-lat" name="lat" required=required/>
    <input type="hidden" id="fixit-form-lng" name="lng" required=required/>
  </form>
  <script role="data">
    {% if object.coordinate %}
      {# Location Detail #}
      var data = {
        id: {{ object.pk }},
        lat: {{ object.coordinate.y }},
        lng: {{ object.coordinate.x }},
        address: "{{ object.address|escapejs }}",
        data: {{ view.data_as_json|safe }}
      };
    {% else %}
      {# Correction Detail #}
      var data = {
        fro_lat: {{ object.fro.y }},
        fro_lng: {{ object.fro.x }},
        to_lat: {{ object.to.y }},
        to_lng: {{ object.to.x }},
        data: {name: "{{ obj.obj }}"},
        address: "{{ object.obj.address|escapejs }}",
      };
    {% endif %}
  </script>
{% endblock %}
